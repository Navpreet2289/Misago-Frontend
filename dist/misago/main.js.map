{"version":3,"sources":["webpack:///main.js","webpack:///./js/index.js","webpack:///./js/App.js","webpack:///./js/containers/AuthPoll/index.js","webpack:///./js/containers/AuthPoll/Interval.js","webpack:///./js/containers/Modal/index.js","webpack:///./js/actions/modal.js","webpack:///./js/constants/actions.js","webpack:///./js/constants/api.js","webpack:///./js/constants/auth.js","webpack:///./js/constants/conf.js","webpack:///./js/constants/search.js","webpack:///./js/constants/store.js","webpack:///./js/constants/urls.js","webpack:///./js/containers/Modal/Modal.js","webpack:///./js/containers/Navbar/index.js","webpack:///./js/containers/Navbar/Navbar.js","webpack:///./js/components/Avatar.js","webpack:///./js/router.js","webpack:///./js/routes/TestRoute.js","webpack:///./js/utils/RouterFactory.js","webpack:///./js/utils/OrderedList.js","webpack:///./js/store.js","webpack:///./js/normalizers/index.js","webpack:///./js/normalizers/normalizeUser.js","webpack:///./js/reducers/index.js","webpack:///./js/reducers/authReducer.js","webpack:///./js/reducers/modalReducer.js","webpack:///./js/utils/StoreFactory.js","webpack:///./js/normalizers/normalizeMoment.js","webpack:///./js/constants/misago.js","webpack:///./js/constants/index.js"],"names":["misago","webpackJsonpmisago","164","e","t","n","u","__esModule","default","Object","defineProperty","value","init","r","__webpack_require__","a","o","_reactDom2","render","_react2","createElement","_App2","document","getElementById","175","_reactRedux","_reactRouterDom","l","i","s","f","d","Provider","store","_store2","create","_AuthPoll2","BrowserRouter","Switch","_router2","routes","map","route","Route","component","key","path","exact","_Navbar2","_Modal2","227","mapStateToProps","state","poll","auth","id","AuthPoll","connect","_Interval2","Interval","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","call","intervalId","_inherits","Component","_createClass","props","window","setInterval","console","log","clearInterval","children","propTypes","_propTypes2","bool","isRequired","actions","modal","ConnectedModal","dispatch","onHide","hideModal","onClosed","unmountModal","_constants","showModal","className","arguments","length","type","SHOW_MODAL","HIDE_MODAL","UNMOUNT_MODAL","232","api","_misago2","isAnonymous","isAuthenticated","conf","search","url","_ref","isOpen","createPortal","toggle","244","user","ConnectedNavbar","showLoginModal","username","_Avatar2","onClick","gettext","246","Avatar","size","size2x","_size","_size2x","alt","_classnames2","height","src","getSrcUrlForUserSize","srcSet","width","string","number","object","avatars","findAvatarForSize","blank_avatar","avatar","forEach","av","router","index","add","_TestRoute2","match","249","TypeError","enumerable","configurable","writable","prototype","RouterFactory","basepath","orderedlist","_OrderedList2","urls","trimmedPath","_lodash2","name","order","normalizedPath","normalizePath","params","split","segment","substr","param","toString","join","values","OrderedList","isOrdered","unordered","items","item","push","after","before","get","_order","ordered","ordering","iterations","insertAt","indexOf","splice","normalizers","_reducers","authReducer","normalizeUser","modalReducer","normalizeMoment","data","assign","acl","joined_on","_normalizeMoment2","initialState","action","_redux","StoreFactory","reducers","reducer","createStore","combineReducers","applyMiddleware","_reduxThunk2","_moment2","5","__MISAGO","c"],"mappings":"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","file":"main.js","sourcesContent":["var misago=webpackJsonpmisago([0],{164:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.init=void 0;var r=u(n(1)),a=u(n(6)),o=u(n(175));u(n(261));t.init=function(){a.default.render(r.default.createElement(o.default,null),document.getElementById(\"app-root\"))}},175:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=u(n(1)),a=n(11),o=n(201),l=u(n(227)),i=u(n(229)),s=u(n(244)),f=u(n(247)),d=u(n(252));t.default=function(){return r.default.createElement(a.Provider,{store:d.default.create()},r.default.createElement(l.default,null,r.default.createElement(o.BrowserRouter,null,r.default.createElement(o.Switch,null,f.default.routes().map(function(e){return r.default.createElement(o.Route,{component:e.component,key:e.key,path:e.path,exact:!0})}))),r.default.createElement(s.default,null),r.default.createElement(i.default,null)))}},227:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.mapStateToProps=void 0;var u=n(11),r=function(e){return e&&e.__esModule?e:{default:e}}(n(228)),a=function(e){return{poll:!!e.auth.id}},o=(0,u.connect)(a)(r.default);t.default=o,t.mapStateToProps=a},228:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function o(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,\"value\"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),i=u(n(2)),s=u(n(1)),f=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.intervalId=null,e}return o(t,s.default.Component),l(t,[{key:\"componentDidMount\",value:function(){this.props.poll&&(this.intervalId=window.setInterval(function(){console.log(\"hit AUTH API for user data\")},4e4))}},{key:\"componentWillUnmount\",value:function(){this.intervalId&&window.clearInterval(this.intervalId)}},{key:\"render\",value:function(){return this.props.children}}]),t}();f.propTypes={poll:i.default.bool.isRequired},t.default=f},229:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.mapStateToProps=void 0;var u=n(11),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(230)),a=function(e){return e&&e.__esModule?e:{default:e}}(n(238)),o=function(e){return e.modal},l=(0,u.connect)(o,function(e){return{onHide:function(){return e(r.hideModal())},onClosed:function(){return e(r.unmountModal())}}})(a.default);t.default=l,t.mapStateToProps=o},230:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.unmountModal=t.hideModal=t.showModal=void 0;var u=n(9);t.showModal=function(e){return{children:e,className:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,type:u.actions.SHOW_MODAL}},t.hideModal=function(){return{type:u.actions.HIDE_MODAL}},t.unmountModal=function(){return{type:u.actions.UNMOUNT_MODAL}}},231:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.HIDE_MODAL=\"HIDE_MODAL\",t.SHOW_MODAL=\"SHOW_MODAL\",t.UNMOUNT_MODAL=\"UNMOUNT_MODAL\"},232:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(5)).default.api;t.default=u},233:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.isAuthenticated=t.isAnonymous=t.id=void 0;var u=function(e){return e&&e.__esModule?e:{default:e}}(n(5)),r=u.default.auth.id,a=u.default.auth.isAnonymous,o=u.default.auth.isAuthenticated;t.id=r,t.isAnonymous=a,t.isAuthenticated=o},234:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(5)).default.conf;t.default=u},235:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(5)).default.search;t.default=u},236:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(5)).default.store;t.default=u},237:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(5)).default.url;t.default=u},238:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=u(n(1)),a=u(n(6)),o=u(n(239));t.default=function(e){var t=e.children,n=e.className,u=e.isOpen,l=e.onClosed,i=e.onHide;return a.default.createPortal(r.default.createElement(o.default,{className:n,isOpen:u,toggle:i,onClosed:l},t),document.getElementById(\"modal-root\"))}},244:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.mapStateToProps=void 0;var u=n(11),r=function(e){return e&&e.__esModule?e:{default:e}}(n(245)),a=function(e){return{isAuthenticated:!!e.auth.id,user:e.auth}},o=(0,u.connect)(a)(r.default);t.default=o,t.mapStateToProps=a},245:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=u(n(1)),a=u(n(6)),o=u(n(246));t.default=function(e){var t=e.isAuthenticated,n=e.showLoginModal,u=e.user;return a.default.createPortal([r.default.createElement(\"span\",{className:\"navbar-text\",key:\"username\"},t?u.username:\"Guest\"),r.default.createElement(o.default,{key:\"user-avatar\",user:u}),r.default.createElement(\"button\",{className:\"btn btn-outline-success my-2 my-sm-0\",key:\"signin\",type:\"button\",onClick:n},gettext(\"Sign in\"))],document.getElementById(\"navbar-root\"))}},246:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=u(n(23)),a=u(n(2)),o=u(n(1)),l=n(9),i=function(e){var t=e.className,n=e.size,u=e.size2x,a=e.user,l=n||100,i=u||l;return o.default.createElement(\"img\",{alt:\"\",className:(0,r.default)(\"user-avatar\",t),height:l,src:s(a,l),srcSet:s(a,i),width:l})};i.propTypes={className:a.default.string,size:a.default.number,user:a.default.object};var s=function(e,t){return e&&e.id&&e.avatars?f(e.avatars,t):l.url.blank_avatar},f=function(e,t){var n=e[0];return e.forEach(function(e){e.size>=t&&(n=e)}),n.url};t.default=i},247:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9),a=u(n(248)),o=new(u(n(249)).default)(r.url.index);o.add(\"index\",\"/\",a.default),o.add(\"terms-of-service\",\"terms-of-service/\",a.default),t.default=o},248:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(1));t.default=function(e){var t=e.match;return u.default.createElement(\"div\",{className:\"container\"},u.default.createElement(\"h1\",null,t.path),u.default.createElement(\"p\",{className:\"lead\"},\"This is test route.\"))}},249:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,\"value\"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),o=u(n(250)),l=u(n(251)),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"/\";r(this,e),this.basepath=t,this.orderedlist=new l.default,this.urls={}}return a(e,[{key:\"normalizePath\",value:function(e){var t=(0,o.default)(e,\"/\");return t?this.basepath+t+\"/\":this.basepath}},{key:\"add\",value:function(e,t,n,u){var r=this.normalizePath(t);this.orderedlist.add(e,{component:n,key:e,path:r},u),this.urls[e]=r}},{key:\"url\",value:function(e,t){if(this.urls[e])return t?this.urls[e].split(\"/\").map(function(e){if(t&&\":\"===e.substr(0,1)){var n=e.substr(1);if(t[n])return t[n].toString()}return e}).join(\"/\"):this.urls[e]}},{key:\"routes\",value:function(){return this.orderedlist.values()}}]),e}();t.default=i},251:function(e,t,n){\"use strict\";function u(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,\"value\"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),a=function(){function e(){u(this,e),this.isOrdered=!1,this.unordered=[],this.items=[]}return r(e,[{key:\"add\",value:function(e,t,n){this.unordered.push({key:e,item:t,after:n?n.after||null:null,before:n?n.before||null:null})}},{key:\"get\",value:function(e,t){for(var n=this.unordered.length,u=0;u<n;u++)if(this.unordered[u].key===e)return this.unordered[u].item;return t||null}},{key:\"has\",value:function(e){return null!==this.get(e)}},{key:\"values\",value:function(){return this.isOrdered||(this.items=this._order(this.unordered),this.isOrdered=!0),this.items}},{key:\"_order\",value:function(e){var t=[];e.forEach(function(e){t.push(e.key)});var n=[],u=[];e.forEach(function(e){e.after||e.before||(n.push(e),u.push(e.key))}),e.forEach(function(e){\"_end\"===e.before&&(n.push(e),u.push(e.key))}),e.forEach(function(e){\"_end\"===e.after&&(n.push(e),u.push(e.key))});for(var r=200;r>0&&t.length!==u.length;)r-=1,e.forEach(function(e){var t=-1;-1===u.indexOf(e.key)&&(e.after?-1!==(t=u.indexOf(e.after))&&(t+=1):e.before&&(t=u.indexOf(e.before)),-1!==t&&(n.splice(t,0,e),u.splice(t,0,e.key)))});return n.map(function(e){return e.item})}}]),e}();t.default=a},252:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=n(9),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(253)),a=n(256),o=new(function(e){return e&&e.__esModule?e:{default:e}}(n(259)).default);o.add(\"auth\",a.authReducer,r.normalizeUser(u.store.auth)),o.add(\"modal\",a.modalReducer),t.default=o},253:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.normalizeUser=t.normalizeMoment=void 0;var r=u(n(45)),a=u(n(255));t.normalizeMoment=r.default,t.normalizeUser=a.default},255:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(45));t.default=function(e){return Object.assign({},{id:null,acl:{}},e,{joined_on:(0,u.default)(e.joined_on)})}},256:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.modalReducer=t.authReducer=void 0;var r=u(n(257)),a=u(n(258));t.authReducer=r.default,t.modalReducer=a.default},257:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u={id:null,acl:{}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;arguments[1];return e}},258:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=n(9),r={isOpen:!1,className:null,children:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];return t.type===u.actions.SHOW_MODAL?{isOpen:!0,className:t.className,children:t.children}:t.type===u.actions.HIDE_MODAL?Object.assign({},e,{isOpen:!1}):t.type===u.actions.UNMOUNT_MODAL?Object.assign({},e,{children:null}):e}},259:function(e,t,n){\"use strict\";function u(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,\"value\"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),a=n(29),o=function(e){return e&&e.__esModule?e:{default:e}}(n(260)),l=function(){function e(){u(this,e),this.reducers={},this.initialState={}}return r(e,[{key:\"add\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.reducers[e]=t,n&&(this.initialState[e]=n)}},{key:\"create\",value:function(){return(0,a.createStore)((0,a.combineReducers)(this.reducers),this.initialState,(0,a.applyMiddleware)(o.default))}}]),e}();t.default=l},261:function(e,t){},45:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function(e){return e?(0,u.default)(e):null}},5:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=window.__MISAGO||{};t.default=u},9:function(e,t,n){\"use strict\";function u(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,\"__esModule\",{value:!0}),t.url=t.store=t.search=t.misago=t.conf=t.auth=t.api=t.actions=void 0;var a=r(n(231)),o=u(n(232)),l=r(n(233)),i=u(n(234)),s=u(n(5)),f=u(n(235)),d=u(n(236)),c=u(n(237));t.actions=a,t.api=o.default,t.auth=l,t.conf=i.default,t.misago=s.default,t.search=f.default,t.store=d.default,t.url=c.default}},[164]);\n\n\n// WEBPACK FOOTER //\n// main.js","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from 'misago/App'\nimport Style from '../scss/style.scss' // eslint-disable-line no-unused-vars\n\nconst init = () => {\n  ReactDOM.render(<App />, document.getElementById('app-root'))\n}\n\nexport { init }\n\n\n\n// WEBPACK FOOTER //\n// ./js/index.js","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\nimport AuthPoll from './containers/AuthPoll'\nimport Modal from './containers/Modal'\nimport Navbar from './containers/Navbar'\nimport router from './router'\nimport store from './store'\n\nconst App = () => {\n  // initialize router and store on render!\n  return (\n    <Provider store={store.create()}>\n      <AuthPoll>\n        <BrowserRouter>\n          <Switch>\n            {router.routes().map((route) => (\n              <Route\n                component={route.component}\n                key={route.key}\n                path={route.path}\n                exact\n              />\n            ))}\n          </Switch>\n        </BrowserRouter>\n        <Navbar />\n        <Modal />\n      </AuthPoll>\n    </Provider>\n  )\n}\n\nexport default App\n\n\n\n// WEBPACK FOOTER //\n// ./js/App.js","// @flow\nimport type { MapStateToProps } from 'react-redux'\nimport { connect } from 'react-redux'\nimport Interval from './Interval'\n\nconst mapStateToProps: MapStateToProps<Object, *, *> = (state: Object): Object => {\n  return {\n    poll: !!state.auth.id\n  }\n}\n\nconst AuthPoll = connect(mapStateToProps)(Interval)\n\nexport default AuthPoll\nexport { mapStateToProps }\n\n\n// WEBPACK FOOTER //\n// ./js/containers/AuthPoll/index.js","import PropTypes from 'prop-types'\nimport React from 'react'\n\nconst frequency = 40 * 1000 // 40s\n\nconst Interval = class extends React.Component {\n  constructor() {\n    super()\n\n    this.intervalId = null\n  }\n\n  componentDidMount() {\n    if (!this.props.poll) return\n\n    this.intervalId = window.setInterval(\n      () => {\n        console.log('hit AUTH API for user data')\n      },\n      frequency\n    )\n  }\n\n  componentWillUnmount() {\n    if (this.intervalId) {\n      window.clearInterval(this.intervalId)\n    }\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n\nInterval.propTypes = {\n  poll: PropTypes.bool.isRequired\n}\n\nexport default Interval\n\n\n// WEBPACK FOOTER //\n// ./js/containers/AuthPoll/Interval.js","// @flow\nimport type { Dispatch } from 'redux'\nimport { connect } from 'react-redux'\nimport * as actions from 'misago/actions/modal'\nimport Modal from './Modal'\n\nconst mapStateToProps = (state: Object) => {\n  return state.modal\n}\n\nconst mapDisaptchToProps = (dispatch: Dispatch<*>) => {\n  return {\n    onHide: () => {\n      return dispatch(actions.hideModal())\n    },\n    onClosed: () => {\n      return dispatch(actions.unmountModal())\n    }\n  }\n}\n\nconst ConnectedModal = connect(mapStateToProps, mapDisaptchToProps)(Modal)\n\nexport default ConnectedModal\nexport { mapStateToProps }\n\n\n// WEBPACK FOOTER //\n// ./js/containers/Modal/index.js","import { actions } from 'misago/constants'\n\nconst showModal = (children, className=null) => {\n  return {\n    children,\n    className,\n\n    type: actions.SHOW_MODAL\n  }\n}\n\nconst hideModal = () => {\n  return {\n    type: actions.HIDE_MODAL\n  }\n}\n\nconst unmountModal = () => {\n  return {\n    type: actions.UNMOUNT_MODAL\n  }\n}\n\nexport {\n  showModal,\n  hideModal,\n  unmountModal\n}\n\n\n// WEBPACK FOOTER //\n// ./js/actions/modal.js","export const HIDE_MODAL = 'HIDE_MODAL'\nexport const SHOW_MODAL = 'SHOW_MODAL'\nexport const UNMOUNT_MODAL = 'UNMOUNT_MODAL'\n\n\n// WEBPACK FOOTER //\n// ./js/constants/actions.js","import misago from './misago'\n\nconst api = misago.api\n\nexport default api\n\n\n// WEBPACK FOOTER //\n// ./js/constants/api.js","import misago from './misago'\n\nconst id = misago.auth.id\nconst isAnonymous = misago.auth.isAnonymous\nconst isAuthenticated = misago.auth.isAuthenticated\n\nexport {\n  id,\n  isAnonymous,\n  isAuthenticated\n}\n\n\n// WEBPACK FOOTER //\n// ./js/constants/auth.js","import misago from './misago'\n\nconst conf = misago.conf\n\nexport default conf\n\n\n// WEBPACK FOOTER //\n// ./js/constants/conf.js","import misago from './misago'\n\nconst search = misago.search\n\nexport default search\n\n\n// WEBPACK FOOTER //\n// ./js/constants/search.js","import misago from './misago'\n\nconst store = misago.store\n\nexport default store\n\n\n// WEBPACK FOOTER //\n// ./js/constants/store.js","import misago from './misago'\n\nconst url = misago.url\n\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./js/constants/urls.js","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Modal from 'reactstrap/lib/Modal'\n\nconst ModalContainer = ({ children, className, isOpen, onClosed, onHide }) => {\n  return ReactDOM.createPortal(\n    <Modal\n      className={className}\n      isOpen={isOpen}\n      toggle={onHide}\n      onClosed={onClosed}\n    >\n      {children}\n    </Modal>,\n    document.getElementById('modal-root')\n  )\n}\n\nexport default ModalContainer\n\n\n// WEBPACK FOOTER //\n// ./js/containers/Modal/Modal.js","// @flow\nimport type { ComponentWithDefaultProps, MapStateToProps } from 'react-redux'\nimport { connect } from 'react-redux'\nimport Navbar from './Navbar'\n\nconst mapStateToProps: MapStateToProps<Object, Object, Object> = (state: Object) => {\n  return {\n    isAuthenticated: !!state.auth.id,\n    user: state.auth\n  }\n}\n\nconst mapDispatchToProps: MapStateToProps<Object, Object, Object> = (state: Object) => {\n  return {\n    isAuthenticated: !!state.auth.id,\n    user: state.auth\n  }\n}\n\nconst ConnectedNavbar: ComponentWithDefaultProps<*, *, Object> = connect(mapStateToProps)(Navbar)\n\nexport default ConnectedNavbar\nexport { mapStateToProps }\n\n\n// WEBPACK FOOTER //\n// ./js/containers/Navbar/index.js","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Avatar from 'misago/components/Avatar'\n\nconst Navbar = ({ isAuthenticated, showLoginModal, user }) => {\n  return ReactDOM.createPortal(\n    [\n      <span className=\"navbar-text\" key=\"username\">\n        { isAuthenticated ? user.username : 'Guest' }\n      </span>,\n      <Avatar key=\"user-avatar\" user={user} />,\n      <button\n        className=\"btn btn-outline-success my-2 my-sm-0\"\n        key=\"signin\"\n        type=\"button\"\n        onClick={showLoginModal}\n      >\n        {gettext('Sign in')}\n      </button>\n    ],\n    document.getElementById('navbar-root')\n  )\n}\n\nexport default Navbar\n\n\n// WEBPACK FOOTER //\n// ./js/containers/Navbar/Navbar.js","// @flow\nimport classNames from 'classnames'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport { url } from 'misago/constants'\n\nconst Avatar = ({ className, size, size2x, user }: AvatarProps) => {\n  const _size = size || 100\n  const _size2x = size2x || _size\n\n  return (\n    <img\n      alt=\"\"\n      className={classNames('user-avatar', className)}\n      height={_size}\n      src={getSrcUrlForUserSize(user, _size)}\n      srcSet={getSrcUrlForUserSize(user, _size2x)}\n      width={_size}\n    />\n  )\n}\n\nAvatar.propTypes = {\n  className: PropTypes.string,\n  size: PropTypes.number,\n  user: PropTypes.object\n}\n\nconst getSrcUrlForUserSize = (user?: User, size: number): string => {\n  if (!!user && user.id && user.avatars) {\n    return findAvatarForSize(user.avatars, size)\n  } else {\n    return url.blank_avatar\n  }\n}\n\nconst findAvatarForSize = (avatars: Array<UserAvatar>, size: number): string  => {\n  let avatar: UserAvatar = avatars[0]\n  avatars.forEach((av: UserAvatar) => {\n    if (av.size >= size) {\n      avatar = av\n    }\n  })\n  return avatar.url\n}\n\nexport default Avatar\n\n\n// WEBPACK FOOTER //\n// ./js/components/Avatar.js","// @flow\nimport { url } from './constants'\nimport TestRoute from './routes/TestRoute'\nimport RouterFactory from './utils/RouterFactory'\n\nconst router: RouterFactory = new RouterFactory(url.index)\n\nrouter.add('index', '/', TestRoute)\nrouter.add('terms-of-service', 'terms-of-service/', TestRoute)\n\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./js/router.js","import React from 'react'\n\nconst TestRoute = ({ match }) => {\n  return (\n    <div className=\"container\">\n      <h1>{match.path}</h1>\n      <p className=\"lead\">This is test route.</p>\n    </div>\n  )\n}\n\nexport default TestRoute\n\n\n\n// WEBPACK FOOTER //\n// ./js/routes/TestRoute.js","// @flow\nimport trim from 'lodash.trim'\nimport OrderedList from './OrderedList'\n\nclass RouterFactory {\n  basepath: string\n  orderedlist: OrderedList\n  urls: { [string]: string }\n\n  constructor(basepath: string='/'): void {\n    this.basepath = basepath\n    this.orderedlist = new OrderedList()\n    this.urls = {}\n  }\n\n  normalizePath(path: string): string {\n    const trimmedPath: string = trim(path, '/')\n    if (!trimmedPath) return this.basepath\n    return this.basepath + trimmedPath + '/'\n  }\n\n  add(name: string, path: string, component: mixed, order?: { after?: string, before?: string }): void {\n    const normalizedPath: string = this.normalizePath(path)\n\n    this.orderedlist.add(name, { component, key: name, path: normalizedPath }, order)\n    this.urls[name] = normalizedPath\n  }\n\n  url(name: string, params: { [string]: string | number } | null | void): string | void {\n    if (!this.urls[name]) return undefined // path not found\n    if (!params) return this.urls[name] // path without params\n\n    const segments: Array<string> = this.urls[name].split('/')\n    const replacedSegments = segments.map((segment: string): string | void => {\n      if (params && segment.substr(0, 1) === ':') {\n        const param = segment.substr(1)\n        if (params[param]) {\n          return params[param].toString()\n        }\n      }\n      return segment\n    })\n\n    return replacedSegments.join('/')\n  }\n\n  routes():Array<mixed> {\n    return this.orderedlist.values()\n  }\n}\n\nexport default RouterFactory\n\n\n// WEBPACK FOOTER //\n// ./js/utils/RouterFactory.js","// @flow\nclass OrderedList {\n  isOrdered: boolean\n  unordered: Array<OrderedListItem>\n  items: Array<mixed>\n\n  constructor(): void {\n    this.isOrdered = false\n    this.unordered = []\n    this.items = []\n  }\n\n  add(key: string, item: mixed, order?: { after?: string, before?: string }): void {\n    this.unordered.push({\n      key: key,\n      item: item,\n\n      after: order ? order.after || null : null,\n      before: order ? order.before || null : null\n    })\n  }\n\n  get(key: string, value: mixed | null): mixed | null {\n    const length: number = this.unordered.length\n    for (let i = 0; i < length; i++) {\n      if (this.unordered[i].key === key) {\n        return this.unordered[i].item\n      }\n    }\n\n    return value || null\n  }\n\n  has(key: string): boolean {\n    return this.get(key) !== null\n  }\n\n  values(): Array<mixed> {\n    if (!this.isOrdered) {\n      this.items = this._order(this.unordered)\n      this.isOrdered = true\n    }\n\n    return this.items\n  }\n\n  _order(unordered: Array<OrderedListItem>): Array<mixed> {\n    // Index of unordered items\n    const index: Array<string> = []\n    unordered.forEach((item: OrderedListItem): void => {\n      index.push(item.key)\n    })\n\n    // Ordered items\n    const ordered: Array<OrderedListItem> = []\n    const ordering: Array<string> = []\n\n    // First pass: register items that\n    // don't specify their order\n    unordered.forEach((item: OrderedListItem): void => {\n      if (!item.after && !item.before) {\n        ordered.push(item)\n        ordering.push(item.key)\n      }\n    })\n\n    // Second pass: register items that\n    // specify their before to \"_end\"\n    unordered.forEach((item: OrderedListItem): void => {\n      if (item.before === '_end') {\n        ordered.push(item)\n        ordering.push(item.key)\n      }\n    })\n\n    // Third pass: register items that\n    // specify their after to \"_end\"\n    unordered.forEach((item: OrderedListItem): void => {\n      if (item.after === '_end') {\n        ordered.push(item)\n        ordering.push(item.key)\n      }\n    })\n\n    // Fourth pass: keep iterating items until we\n    // hit iterations limit or finish ordering list\n    const insertItem = (item: OrderedListItem): void => {\n      let insertAt = -1\n      if (ordering.indexOf(item.key) === -1) {\n        if (item.after) {\n          insertAt = ordering.indexOf(item.after)\n          if (insertAt !== -1) {\n            insertAt += 1\n          }\n        } else if (item.before) {\n          insertAt = ordering.indexOf(item.before)\n        }\n\n        if (insertAt !== -1) {\n          ordered.splice(insertAt, 0, item)\n          ordering.splice(insertAt, 0, item.key)\n        }\n      }\n    }\n\n    let iterations = 200\n    while (iterations > 0 && index.length !== ordering.length) {\n      iterations -= 1\n      unordered.forEach(insertItem)\n    }\n\n    return ordered.map((item: OrderedListItem): mixed => {\n      return item.item\n    })\n  }\n}\n\n\nexport default OrderedList\n\n\n// WEBPACK FOOTER //\n// ./js/utils/OrderedList.js","// @flow\nimport { store as initialState } from './constants'\nimport * as normalizers from './normalizers'\nimport { authReducer } from './reducers'\nimport { modalReducer } from './reducers'\nimport StoreFactory from './utils/StoreFactory'\n\nconst store: StoreFactory = new StoreFactory()\n\nstore.add('auth', authReducer, normalizers.normalizeUser(initialState.auth))\nstore.add('modal', modalReducer)\n\nexport default store\n\n\n// WEBPACK FOOTER //\n// ./js/store.js","import normalizeMoment from './normalizeMoment'\nimport normalizeUser from './normalizeUser'\n\nexport {\n  normalizeMoment,\n  normalizeUser\n}\n\n\n// WEBPACK FOOTER //\n// ./js/normalizers/index.js","// @flow\nimport normalizeMoment from './normalizeMoment'\n\nconst normalizeUser = (data: Object): User => {\n  return Object.assign({}, { id: null, acl: {} }, data, {\n    joined_on: normalizeMoment(data.joined_on)\n  })\n}\n\nexport default normalizeUser\n\n\n// WEBPACK FOOTER //\n// ./js/normalizers/normalizeUser.js","import authReducer from './authReducer'\nimport modalReducer from './modalReducer'\n\nexport {\n  authReducer,\n  modalReducer\n}\n\n\n// WEBPACK FOOTER //\n// ./js/reducers/index.js","//@flow\nconst initialState: AuthenticatedUser = {\n  id: null,\n  acl: {}\n}\n\nconst authReducer = (state: AuthenticatedUser = initialState, action: Action) => {\n  return state\n}\n\nexport default authReducer\n\n\n// WEBPACK FOOTER //\n// ./js/reducers/authReducer.js","//@flow\nimport { actions } from 'misago/constants'\n\nconst initialState: ModalState = {\n  isOpen: false,\n  className: null,\n  children: null\n}\n\nconst modalReducer = (state: ModalState = initialState, action: Action) => {\n  if (action.type === actions.SHOW_MODAL) {\n    return {\n      isOpen: true,\n      className: action.className,\n      children: action.children\n    }\n  }\n\n  if (action.type === actions.HIDE_MODAL) {\n    return Object.assign({}, state, { isOpen: false })\n  }\n\n  if (action.type === actions.UNMOUNT_MODAL) {\n    return Object.assign({}, state, { children: null })\n  }\n\n  return state\n}\n\nexport default modalReducer\n\n\n// WEBPACK FOOTER //\n// ./js/reducers/modalReducer.js","// @flow\nimport type { Reducer } from 'redux'\nimport { applyMiddleware, combineReducers, createStore } from 'redux'\nimport ReduxThunk from 'redux-thunk'\n\nclass StoreFactory {\n  reducers: { [string]: Reducer<State, Action> }\n  initialState: { [string]: Object }\n\n  constructor(): void {\n    this.reducers = {}\n    this.initialState = {}\n  }\n\n  add(key: string, reducer: Reducer<State, Action>, initialState: Object | null = null): void {\n    this.reducers[key] = reducer\n    if (initialState) {\n      this.initialState[key] = initialState\n    }\n  }\n\n  create() {\n    return createStore(\n      combineReducers(this.reducers),\n      this.initialState,\n      applyMiddleware(ReduxThunk)\n    )\n  }\n}\n\nexport default StoreFactory\n\n\n// WEBPACK FOOTER //\n// ./js/utils/StoreFactory.js","// @flow\nimport type MomentObject from 'moment'\nimport moment from 'moment'\n\nconst normalizeMoment = (data: string | void | null): MomentObject | null => {\n  return data ? moment(data) : null\n}\n\nexport default normalizeMoment\n\n\n// WEBPACK FOOTER //\n// ./js/normalizers/normalizeMoment.js","/* global window */\nconst misago = window.__MISAGO || {}\n\nexport default misago\n\n\n// WEBPACK FOOTER //\n// ./js/constants/misago.js","import * as actions from './actions'\nimport api from './api'\nimport * as auth from './auth'\nimport conf from './conf'\nimport misago from './misago'\nimport search from './search'\nimport store from './store'\nimport url from './urls'\n\nexport {\n  actions,\n  api,\n  auth,\n  conf,\n  misago,\n  search,\n  store,\n  url\n}\n\n\n// WEBPACK FOOTER //\n// ./js/constants/index.js"],"sourceRoot":""}